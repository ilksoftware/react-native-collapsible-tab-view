{"version":3,"sources":["Container.tsx"],"names":["Container","React","memo","forwardRef","initialTabName","headerHeight","initialHeaderHeight","minHeaderHeight","tabBarHeight","initialTabBarHeight","TABBAR_HEIGHT","revealHeaderOnScroll","snapThreshold","children","HeaderComponent","TabBarComponent","MaterialTabBar","headerContainerStyle","cancelTranslation","containerStyle","lazy","cancelLazyFadeIn","pagerProps","onIndexChange","onTabChange","ref","containerRef","tabProps","tabNamesArray","Tab","refMap","setRef","windowWidth","width","firstRender","useRef","containerWidth","setContainerWidth","useState","containerHeight","setContainerHeight","undefined","setTabBarHeight","setHeaderHeight","contentInset","useMemo","IS_IOS","isSwiping","isSnapping","snappingTo","isGliding","offset","accScrollY","oldAccScrollY","accDiffClamp","isScrolling","scrollYCurrent","scrollY","map","contentHeights","tabNames","index","value","findIndex","n","scrollX","pagerOpacity","data","setData","useEffect","focusedTab","calculateNextOffset","headerScrollDistance","getItemLayout","useCallback","_","length","indexDecimal","current","scrollToIndex","animated","afterRender","ONE_FRAME_MS","duration","trigger","forEach","name","nextIndex","Math","round","propagateTabChange","change","i","prevIndex","prevTabName","tabName","scrollHandlerX","onScroll","event","x","contentOffset","onBeginDrag","onMomentumEnd","renderItem","Children","toArray","headerTranslateY","min","stylez","transform","translateY","getHeaderHeight","height","nativeEvent","layout","getTabBarHeight","onLayout","update","pagerStylez","opacity","onTabPress","scrollToImpl","keyExtractor","useImperativeHandle","setIndex","jumpToTab","getFocusedTab","getCurrentIndex","tabBarWidth","styles","container","topContainer","headerContainer","tabBarContainer","style","StyleSheet","create","flex","position","zIndex","backgroundColor","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {\n  LayoutChangeEvent,\n  StyleSheet,\n  useWindowDimensions,\n  View,\n} from 'react-native'\nimport Animated, {\n  runOnJS,\n  runOnUI,\n  useAnimatedReaction,\n  useAnimatedScrollHandler,\n  useAnimatedStyle,\n  useDerivedValue,\n  useSharedValue,\n  withDelay,\n  withTiming,\n} from 'react-native-reanimated'\n\nimport { Context, TabNameContext } from './Context'\nimport { Lazy } from './Lazy'\nimport { MaterialTabBar, TABBAR_HEIGHT } from './MaterialTabBar'\nimport { Tab } from './Tab'\nimport { AnimatedFlatList, IS_IOS, ONE_FRAME_MS, scrollToImpl } from './helpers'\nimport { useAnimatedDynamicRefs, useContainerRef, useTabProps } from './hooks'\nimport {\n  CollapsibleProps,\n  CollapsibleRef,\n  ContextType,\n  IndexChangeEventData,\n  TabName,\n} from './types'\n\n/**\n * Basic usage looks like this:\n *\n * ```tsx\n * import { Tabs } from 'react-native-collapsible-tab-view'\n *\n * const Example = () => {\n *   return (\n *     <Tabs.Container HeaderComponent={MyHeader}>\n *       <Tabs.Tab name=\"A\">\n *         <ScreenA />\n *       </Tabs.Tab>\n *       <Tabs.Tab name=\"B\">\n *         <ScreenB />\n *       </Tabs.Tab>\n *     </Tabs.Container>\n *   )\n * }\n * ```\n */\nexport const Container = React.memo(\n  React.forwardRef<CollapsibleRef, CollapsibleProps>(\n    (\n      {\n        initialTabName,\n        headerHeight: initialHeaderHeight,\n        minHeaderHeight = 0,\n        tabBarHeight: initialTabBarHeight = TABBAR_HEIGHT,\n        revealHeaderOnScroll = false,\n        snapThreshold,\n        children,\n        HeaderComponent,\n        TabBarComponent = MaterialTabBar,\n        headerContainerStyle,\n        cancelTranslation,\n        containerStyle,\n        lazy,\n        cancelLazyFadeIn,\n        pagerProps,\n        onIndexChange,\n        onTabChange,\n      },\n      ref\n    ) => {\n      const containerRef = useContainerRef()\n\n      const [tabProps, tabNamesArray] = useTabProps(children, Tab)\n\n      const [refMap, setRef] = useAnimatedDynamicRefs()\n\n      const windowWidth = useWindowDimensions().width\n      const firstRender = React.useRef(true)\n\n      const [containerWidth, setContainerWidth] = React.useState<number>(\n        windowWidth\n      )\n      const [containerHeight, setContainerHeight] = React.useState<\n        number | undefined\n      >(undefined)\n      const [tabBarHeight, setTabBarHeight] = React.useState<\n        number | undefined\n      >(initialTabBarHeight)\n      const [headerHeight, setHeaderHeight] = React.useState<\n        number | undefined\n      >(!HeaderComponent ? 0 : initialHeaderHeight)\n\n      const contentInset = React.useMemo(\n        () => (IS_IOS ? (headerHeight || 0) + (tabBarHeight || 0) : 0),\n        [headerHeight, tabBarHeight]\n      )\n\n      const isSwiping = useSharedValue(false)\n      const isSnapping: ContextType['isSnapping'] = useSharedValue(false)\n      const snappingTo: ContextType['snappingTo'] = useSharedValue(0)\n      const isGliding: ContextType['isGliding'] = useSharedValue(false)\n      const offset: ContextType['offset'] = useSharedValue(0)\n      const accScrollY: ContextType['accScrollY'] = useSharedValue(0)\n      const oldAccScrollY: ContextType['oldAccScrollY'] = useSharedValue(0)\n      const accDiffClamp: ContextType['accDiffClamp'] = useSharedValue(0)\n      const isScrolling: ContextType['isScrolling'] = useSharedValue(0)\n      const scrollYCurrent: ContextType['scrollYCurrent'] = useSharedValue(0)\n      const scrollY: ContextType['scrollY'] = useSharedValue(\n        tabNamesArray.map(() => 0),\n        false\n      )\n\n      const contentHeights: ContextType['contentHeights'] = useSharedValue(\n        tabNamesArray.map(() => 0),\n        false\n      )\n\n      const tabNames: ContextType['tabNames'] = useDerivedValue<TabName[]>(\n        () => tabNamesArray,\n        [tabNamesArray]\n      )\n      const index: ContextType['index'] = useSharedValue(\n        initialTabName\n          ? tabNames.value.findIndex((n) => n === initialTabName)\n          : 0\n      )\n      const scrollX: ContextType['scrollX'] = useSharedValue(\n        index.value * windowWidth,\n        false\n      )\n      const pagerOpacity = useSharedValue(\n        initialHeaderHeight === undefined || index.value !== 0 ? 0 : 1,\n        false\n      )\n      const [data, setData] = React.useState(tabNamesArray)\n\n      React.useEffect(() => {\n        setData(tabNamesArray)\n      }, [tabNamesArray])\n\n      const focusedTab: ContextType['focusedTab'] = useDerivedValue<TabName>(() => {\n        return tabNames.value[index.value]\n      }, [tabNames])\n      const calculateNextOffset = useSharedValue(index.value)\n      const headerScrollDistance: ContextType['headerScrollDistance'] = useDerivedValue(() => {\n        return headerHeight !== undefined ? headerHeight - minHeaderHeight : 0\n      }, [headerHeight, minHeaderHeight])\n\n      const getItemLayout = React.useCallback(\n        (_: unknown, index: number) => ({\n          length: containerWidth,\n          offset: containerWidth * index,\n          index,\n        }),\n        [containerWidth]\n      )\n\n      const indexDecimal: ContextType['indexDecimal'] = useDerivedValue(() => {\n        return scrollX.value / containerWidth\n      }, [containerWidth])\n\n      // handle window resize\n      React.useEffect(() => {\n        if (!firstRender.current) {\n          containerRef.current?.scrollToIndex({\n            index: index.value,\n            animated: false,\n          })\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n      }, [windowWidth])\n\n      const afterRender = useSharedValue(0)\n      React.useEffect(() => {\n        if (!firstRender.current) pagerOpacity.value = 0\n        afterRender.value = withDelay(\n          ONE_FRAME_MS * 5,\n          withTiming(1, { duration: 0 })\n        )\n      }, [afterRender, pagerOpacity, tabNamesArray])\n\n      React.useEffect(() => {\n        if (firstRender.current) {\n          if (initialTabName !== undefined && index.value !== 0) {\n            containerRef.current?.scrollToIndex({\n              index: index.value,\n              animated: false,\n            })\n          }\n          firstRender.current = false\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n      }, [containerRef, initialTabName, windowWidth])\n\n      // the purpose of this is to scroll to the proper position if dynamic tabs are changing\n      useAnimatedReaction(\n        () => {\n          return afterRender.value === 1\n        },\n        (trigger) => {\n          if (trigger) {\n            afterRender.value = 0\n            tabNamesArray.forEach((name) => {\n              'worklet'\n              scrollToImpl(\n                refMap[name],\n                0,\n                scrollY.value[index.value] - contentInset,\n                false\n              )\n            })\n\n            pagerOpacity.value = withTiming(1)\n          }\n        },\n        [tabNamesArray, refMap, afterRender, contentInset]\n      )\n\n      // derived from scrollX\n      // calculate the next offset and index if swiping\n      // if scrollX changes from tab press,\n      // the same logic must be done, but knowing\n      // the next index in advance\n      useAnimatedReaction(\n        () => {\n          const nextIndex = isSwiping.value\n            ? Math.round(indexDecimal.value)\n            : null\n          return nextIndex\n        },\n        (nextIndex) => {\n          if (nextIndex !== null && nextIndex !== index.value) {\n            calculateNextOffset.value = nextIndex\n          }\n        },\n        []\n      )\n\n      const propagateTabChange = React.useCallback(\n        (change: IndexChangeEventData<TabName>) => {\n          onTabChange?.(change)\n          onIndexChange?.(change.index)\n        },\n        [onIndexChange, onTabChange]\n      )\n\n      useAnimatedReaction(\n        () => {\n          return calculateNextOffset.value\n        },\n        (i) => {\n          if (i !== index.value) {\n            offset.value =\n              scrollY.value[index.value] - scrollY.value[i] + offset.value\n            runOnJS(propagateTabChange)({\n              prevIndex: index.value,\n              index: i,\n              prevTabName: tabNames.value[index.value],\n              tabName: tabNames.value[i],\n            })\n            index.value = i\n          }\n        },\n        []\n      )\n\n      const scrollHandlerX = useAnimatedScrollHandler(\n        {\n          onScroll: (event) => {\n            const { x } = event.contentOffset\n            scrollX.value = x\n          },\n          onBeginDrag: () => {\n            isSwiping.value = true\n          },\n          onMomentumEnd: () => {\n            isSwiping.value = false\n          },\n        },\n        []\n      )\n\n      const renderItem = React.useCallback(\n        ({ index: i }) => {\n          if (!tabNames.value[i]) return null\n          return (\n            <TabNameContext.Provider value={tabNames.value[i]}>\n              {lazy ? (\n                <Lazy\n                  startMounted={i === index.value}\n                  cancelLazyFadeIn={cancelLazyFadeIn}\n                >\n                  {React.Children.toArray(children)[i] as React.ReactElement}\n                </Lazy>\n              ) : (\n                React.Children.toArray(children)[i]\n              )}\n            </TabNameContext.Provider>\n          )\n        },\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [children, lazy, tabNames.value, cancelLazyFadeIn]\n      )\n\n      const headerTranslateY = useDerivedValue(() => {\n        return revealHeaderOnScroll\n          ? -accDiffClamp.value\n          : -Math.min(scrollYCurrent.value, headerScrollDistance.value)\n      }, [revealHeaderOnScroll])\n\n      const stylez = useAnimatedStyle(() => {\n        return {\n          transform: [\n            {\n              translateY: headerTranslateY.value,\n            },\n          ],\n        }\n      }, [revealHeaderOnScroll])\n\n      const getHeaderHeight = React.useCallback(\n        (event: LayoutChangeEvent) => {\n          const height = event.nativeEvent.layout.height\n          if (headerHeight !== height) {\n            setHeaderHeight(height)\n          }\n        },\n        [headerHeight]\n      )\n\n      const getTabBarHeight = React.useCallback(\n        (event: LayoutChangeEvent) => {\n          const height = event.nativeEvent.layout.height\n          if (tabBarHeight !== height) setTabBarHeight(height)\n        },\n        [tabBarHeight]\n      )\n\n      const onLayout = React.useCallback(\n        (event: LayoutChangeEvent) => {\n          const height = event.nativeEvent.layout.height\n          if (containerHeight !== height) setContainerHeight(height)\n\n          const width = event.nativeEvent.layout.width\n          if (containerWidth !== width) setContainerWidth(width)\n        },\n        [containerHeight, containerWidth]\n      )\n\n      // fade in the pager if the headerHeight is not defined\n      useAnimatedReaction(\n        () => {\n          return (\n            (initialHeaderHeight === undefined ||\n              initialTabName !== undefined) &&\n            headerHeight !== undefined &&\n            pagerOpacity.value === 0\n          )\n        },\n        (update) => {\n          if (update) {\n            pagerOpacity.value = withTiming(1)\n          }\n        },\n        [headerHeight]\n      )\n\n      const pagerStylez = useAnimatedStyle(() => {\n        return {\n          opacity: pagerOpacity.value,\n        }\n      }, [])\n\n      const onTabPress = React.useCallback(\n        (name: TabName) => {\n          // simplify logic by preventing index change\n          // when is scrolling or gliding.\n          if (!isScrolling.value && !isGliding.value) {\n            const i = tabNames.value.findIndex((n) => n === name)\n            calculateNextOffset.value = i\n            if (name === focusedTab.value) {\n              const ref = refMap[name]\n              runOnUI(scrollToImpl)(\n                ref,\n                0,\n                headerScrollDistance.value - contentInset,\n                true\n              )\n            } else {\n              containerRef.current?.scrollToIndex({ animated: true, index: i })\n            }\n          }\n        },\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [containerRef, refMap, contentInset]\n      )\n\n      React.useEffect(() => {\n        if (index.value >= tabNamesArray.length) {\n          onTabPress(tabNamesArray[tabNamesArray.length - 1])\n        }\n      }, [index.value, onTabPress, tabNamesArray])\n\n      const keyExtractor = React.useCallback((name) => name, [])\n\n      React.useImperativeHandle(\n        ref,\n        () => ({\n          setIndex: (index) => {\n            if (isScrolling.value || isGliding.value) return false\n            const name = tabNames.value[index]\n            onTabPress(name)\n            return true\n          },\n          jumpToTab: (name) => {\n            if (isScrolling.value || isGliding.value) return false\n            onTabPress(name)\n            return true\n          },\n          getFocusedTab: () => {\n            return tabNames.value[index.value]\n          },\n          getCurrentIndex: () => {\n            return index.value\n          },\n        }),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [onTabPress]\n      )\n\n      return (\n        <Context.Provider\n          value={{\n            contentInset,\n            tabBarWidth: containerWidth || 0,\n            tabBarHeight: tabBarHeight || 0,\n            headerHeight: headerHeight || 0,\n            refMap,\n            tabNames,\n            index,\n            snapThreshold,\n            revealHeaderOnScroll,\n            focusedTab,\n            accDiffClamp,\n            indexDecimal,\n            containerHeight,\n            scrollYCurrent,\n            scrollY,\n            setRef,\n            headerScrollDistance,\n            accScrollY,\n            oldAccScrollY,\n            offset,\n            isScrolling,\n            scrollX,\n            isGliding,\n            isSnapping,\n            snappingTo,\n            contentHeights,\n            headerTranslateY,\n          }}\n        >\n          <Animated.View\n            style={[styles.container, containerStyle]}\n            onLayout={onLayout}\n            pointerEvents=\"box-none\"\n          >\n            <Animated.View\n              pointerEvents=\"box-none\"\n              style={[\n                styles.topContainer,\n                headerContainerStyle,\n                !cancelTranslation && stylez,\n              ]}\n            >\n              <View\n                style={[styles.container, styles.headerContainer]}\n                onLayout={getHeaderHeight}\n                pointerEvents=\"box-none\"\n              >\n                {HeaderComponent && (\n                  <HeaderComponent\n                    containerRef={containerRef}\n                    index={index}\n                    tabNames={tabNamesArray}\n                    focusedTab={focusedTab}\n                    indexDecimal={indexDecimal}\n                    onTabPress={onTabPress}\n                    tabProps={tabProps}\n                  />\n                )}\n              </View>\n              <View\n                style={[styles.container, styles.tabBarContainer]}\n                onLayout={getTabBarHeight}\n                pointerEvents=\"box-none\"\n              >\n                {TabBarComponent && (\n                  <TabBarComponent\n                    containerRef={containerRef}\n                    index={index}\n                    tabNames={tabNamesArray}\n                    focusedTab={focusedTab}\n                    indexDecimal={indexDecimal}\n                    onTabPress={onTabPress}\n                    tabProps={tabProps}\n                  />\n                )}\n              </View>\n            </Animated.View>\n            {headerHeight !== undefined && (\n              <AnimatedFlatList\n                // @ts-expect-error problem with reanimated types, they're missing `ref`\n                ref={containerRef}\n                initialScrollIndex={index.value}\n                data={data}\n                keyExtractor={keyExtractor}\n                renderItem={renderItem}\n                horizontal\n                pagingEnabled\n                onScroll={scrollHandlerX}\n                showsHorizontalScrollIndicator={false}\n                getItemLayout={getItemLayout}\n                scrollEventThrottle={16}\n                bounces={false}\n                {...pagerProps}\n                style={[pagerStylez, pagerProps?.style]}\n              />\n            )}\n          </Animated.View>\n        </Context.Provider>\n      )\n    }\n  )\n)\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  topContainer: {\n    position: 'absolute',\n    zIndex: 100,\n    width: '100%',\n    backgroundColor: 'white',\n    shadowColor: '#000000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.23,\n    shadowRadius: 2.62,\n    elevation: 4,\n  },\n  tabBarContainer: {\n    zIndex: 1,\n  },\n  headerContainer: {\n    zIndex: 2,\n  },\n})\n"]}